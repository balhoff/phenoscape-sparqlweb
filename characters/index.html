<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Characters Â« Phenoscape Knowledgebase</title>
	<!-- Date: 2012-03-27 -->
	<script src="/config/config.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
	<script src="http://documentcloud.github.com/underscore/underscore-min.js"></script>
	<script src="/scripts/jquery.spark.js"></script>
	<script src="/scripts/purl.js"></script>
	<script src="/scripts/partials.js"></script>
	<script src="/scripts/sparql.js"></script>
	<link href="/style/main.css" media="screen" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="header"></div>
<div id="query_form" action="">
	<form>
		<input name="text" class="search-field"></text><input type="submit" value="Search characters">
	</form>
</div>
<div id="characters">
Loading...
</div>
<div id="footer"></div>
</body>
<script>
$(document).ready(function() {
	$("#header").load_partial('../shared/_header.html', {}, null);
	$("#footer").load_partial('../shared/_footer.html', {}, null);
	var offset = purl().param('offset');
	var text = purl().param('text');
	// $("#characters").spark_template('./characters.rq', {endpoint:config.endpoint, format:"/scripts/underscore.template_each.js", param:{partial:"./_character.html"}, result:"table"}, {limit:20, desc:(purl().param('desc') == 'true'), offset:(offset ? offset : 0), text:text});
	// 	});
	partials.render_template("./characters.rq", {limit:20, desc:(purl().param('desc') == 'true'), offset:(offset ? offset : 0), text:text}, function (query) { 
		sparql.select(query, config.endpoint, function (sparql_json) {			
				partials.load_partial_each("#characters", "./_character.html", sparql_json.results.bindings);
		}); 
	});
});
</script>
</html>
